{% extends "base.html" %}
{% from 'bootstrap5/form.html' import render_form %}

{% block title %}Flasky{% endblock %}

{% block page_content %}
    <div style="width: 30vw;" class="card border border-1 rounded shadow px-3 py-5  mt-5 mx-auto">
        <h3>登录</h3>
        <form method="POST" enctype="multipart/form-data">
            {{ form.csrf_token }}
            <div class="row mt-3">
                <div class="col-3 my-auto">{{ form.email.label }}</div>
                <div class="col-9">{{ form.email(class='form-control') }}</div>
            </div>

            <div class="row mt-3">
                <div class="col-3 my-auto">{{ form.password.label }}</div>
                <div class="col-9">{{ form.password(class='form-control') }}</div>
            </div>

            <div class="row mt-3">
                <div class="col-3 my-auto">{{ form.code.label }}</div>
                <div class="col-5 my-auto">{{ form.code(class='form-control') }}</div>
                <div class="col-4">
                    <img class='img-rounded'
                         style="width: 7em; height: 3em;"
                         src="{{ url_for('auth.get_image') }}"
                         title="单击刷新"
                         onclick="this.src =
                                 '{{ url_for('auth.get_image') }}?' +
                                 Math.random()">
                </div>
            </div>

            <div class="mt-3">
                <label for="agree">{{ form.remember_me.label }}</label>
                <input type="checkbox" id="agree" name="agree" value="y"
                       {% if form.remember_me.data %}checked{% endif %}>
            </div>

            <button name="submit" id="submit"
                    type="submit" class="mt-4 w-100 btn btn-primary ">提交
            </button>
        </form>

        <br>
        <p class="text-end">新用户注册? <a href="{{ url_for('auth.register') }}">点击注册</a></p>
    </div>

{% endblock %}